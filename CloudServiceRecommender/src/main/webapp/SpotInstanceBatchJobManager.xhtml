<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
  <h:head>
    <title>Aws Ec2 Instances Price</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </h:head>
  <h:body>
    <h1>Aws Ec2 Instances Price Downloader</h1>
    <hr/>
    <h:form id="spot">
      <p>
        <h:commandButton value="Start Download" action="#{spotInstanceBatchJobManager.startFetchingSpotPrices}"/>
        <h:commandButton value="Stop Download" action="#{spotInstanceBatchJobManager.stopFetchingSpotPrices}"/>
      </p>
      <p>
        <h:outputLabel rendered="#{spotInstanceBatchJobManager.batchJobRunning}" value="Aws ec2 instance batch job RUNNING"/>
        <h:outputLabel rendered="#{!spotInstanceBatchJobManager.batchJobRunning}" value="Aws ec2 instance batch job STOPED"/>
      </p>
      <p>
        <h:outputText id="out" styleClass="ui-widget display"/>
      </p>
    </h:form>

    <p:socket onMessage="handleMessage" channel="/notify"/>

    <script type="text/javascript">
      function handleMessage(message) {
        $('.display').html(message);
        console.log(message);
      }
    </script>

  </h:body>
</html>
